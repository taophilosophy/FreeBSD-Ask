# 第 18.1 节 树莓派简介与配件选用

## 树莓派是什么？

我们常见的 Android 安卓手机、最新款的 Apple MacBook、电视机顶盒处理器均基于 ARM 芯片。

树莓派就是一块基于 ARM 芯片的开发板，即一块接口丰富（HDMI、I²C、USB 2.0/3.0、I²S、CSI、GPIO、串口、RTC、PWM 风扇、DSI、PCIe（需要转接）、POE 模块等）的电路板，相当于同期的千元红米手机（高通款）。

手机能做的事情，树莓派都能做；手机做不了的事，树莓派大都也能做。一般用于嵌入式开发，如机器人，路由器和监控等等。

在美剧《黑客军团》（*Mr. Robot*）中，树莓派还充当了渗透工具。当然，上述并非树莓派的初衷——树莓派是英国树莓派基金会的计算机教育产物。

---

据称，树莓派最初的目标是为了拯救面临废系的剑桥大学计算机科学与技术系。经分析论证，教学主管认为主要原因是现在的小孩子没有便宜且开放的电脑可玩。

~~“为了守护我们最爱的院系——我们所能做的，就是开发一块每个人都买得起的电路板！！”~~

尽管《LoveLive!》以失败告终，但树莓派取得了巨大成功！

## 常见疑问解答

- 树莓派 4 以前的型号不如同期千元机，即使是树莓派 5 也仅相当于同代千元机。为什么不直接买二手的高端机？

答：手机确实配置高于树莓派，但是没有可扩展性（典型功能 GPIO）。

- 要可扩展性，为什么不直接买 X86 小主机？

答：首先，受限于散热（功耗墙）、电源供应，与树莓派物理尺寸（信用卡大小）相同的 x86 开发板（如 Raxda x4），其性能并不比树莓派高出多少，发热倒是上去了。其次，讨论比树莓派大的开发板亦没有意义。那不是一个类型的东西。

- 为什么不买基于瑞芯微（Rockchip）的 RK 3588/3528/35xx ？

答：所有瑞芯微的配套支持均十分欠缺，几乎只保证你能开机。**他可以标他支持 8K，但是有没有驱动就是你的问题了。** **他们并非基金会或设计用于教育目的。** 他们都是标准的商品，故相关配套产品应由其开发板提供商提供，**用户没有义务为其进行任何移植**（除非是工业开发，如果你付费，他们会提供支持）。拿来玩的用户需要的是开箱即用的产品，即使是开发板亦如此。如果你提供不了任何最基本的技术支持，或者需要用户自行维护 Linux 主线，那么我建议不要做成商业产品。如果需要用户来做这些本应由瑞芯微（或开发板制造商）去做的事，那么我建议瑞芯微开发板制造商应为其付费。**换言之，这压根就不是同类产品。瑞芯微更适合专业的从业者使用。**

在某些人的思想中，这并非瑞芯微的问题，是用户的计算机技术不行，水平太低，也不想查手册花时间去学，动手去移植。瑞芯微已经很便宜了，没有义务提供这些。

“整个行业都这样，反而树莓派才是异类。是你玩的开发板太少啦！”

这些人已全然忘记 Ubuntu 这个来自非洲大地的词语本意。

那么，我再说一遍：你提供的是商业产品。故提供驱动程序、在生命周期内，集成到最新主线 LTS Linux 内核、长期维护的在线/离线文档、除开发板外的周边产品（外壳、电源、各种线缆和转接器、扩展板、散热器、天线等）、是你应尽的、且是最基本的义务。


**不要试图将你的任何责任转嫁给用户，即使某些用户自己也拎不清。**

**如果你提供不了任何最基本的技术支持，或者需要用户自行维护 Linux 主线，那么我建议不要做成商业零售产品。**

- 只有瑞芯微和博通可选？

答：还有更为节能的全志（Allwinner）处理器。


## 有必要先测试 U 盘/存储卡的 4K 读写速度

测试方法见其他章节。

自树莓派 3B+ 以降，无需任何改动，系统即可从 U 盘启动：经测试，FreeBSD 12/13/14 均支持，但是速度非常慢：一方面树莓派受到了总线速度极大的限制，本身接口也并非最高速——树莓派到了树莓派 5，才支持了 SDR104（UHS-I）。之前的老款树莓派最高支持 SDR50（UHS-I）。另一方面，某些 U 盘的质量堪忧。

树莓派的 SD 卡接口限制了存储卡的速率，并不会太高，因此使用标称 100MB+ 的存储卡毫无体验——且他们的速度也是无意义的，必须使用所谓的超频读卡器。除此以外，没有任何设备能支持他们所宣称的速度。

对于树莓派来说，4K 随机读写速率才是最重要的。测试标准必须至少达到存储卡的 [A2 级别（读 4000 IOPS、写 2000 IOPS）](https://www.kingston.com/cn/blog/personal-storage/microsd-sd-memory-card-naming-conventions)。

## 部分 U 盘的 4K 速写速度可能还不如正常的 A2 存储卡

最离谱的是金士顿 DataTraveler 100 G3 USB 3.0 Flash Drive（即 DT100G3），4K 随机竟然是 `0`。使用起来也非常卡慢。

![金士顿 DataTraveler 100 G3 USB 3.0 Flash Drive（即 DT100G3）速写速度测试](../.gitbook/assets/1011.png)

![金士顿 DataTraveler 100 G3 USB 3.0 Flash Drive（即 DT100G3）速写速度测试](../.gitbook/assets/1012.png)

测试数据没有问题，他 4K 写入就是 0。使用起来也符合这个预期水平。

## 参考文献

- [Raspberry Pi 树莓派中文文档](https://rpicn.bsdcn.org)
- [【教學/基礎】實測 Raspberry Pi 5 上的 SD 卡效能](https://piepie.com.tw/52880/sd-card-performance-in-raspberry-pi-5)
- [Default Setting for the UHSMODE?](https://forums.raspberrypi.com/viewtopic.php?t=75464)
- [DataTraveler 100 G3 USB 3.0 Flash Drive - 技术支持](https://www.kingston.com/cn/support/technical/products/dt100g3)
- IOPS-MB 在线转换器：[IOPS, MB/s, GB/day Converter](https://wintelguy.com/iops-mbs-gbday-calc.pl)

## microSD 卡（存储卡/TF 卡/SD 卡/内存卡）参数简介


存储卡规范是由 [SD 协会](https://www.sdcard.org/)制定的。

SD 卡的标准十分混乱，甚至与 USB-IF 协会制定的 USB 标准相比，其混乱程度亦难分伯仲——SD 卡协会难辞其咎。

SD 卡的标准之所以这么混乱，根源是因为在随时代发展的同时，SD 卡协会并不会弃用先前的旧标准（如放弃英制单位，使用公制单位），更不会提升之前的标准（如刷版本号），而是另行创建一个更高段的标准。**简言之，SD 卡存在多种并行的度量衡，且量程各有重叠和差异。**

![闪迪 microSD 卡](../.gitbook/assets/SD.png)

上图是一张 microSD（微型）SD 卡，即树莓派、手机所使用的。

>**注意**
>
>仅最老款的树莓派使用标准 SD 卡，目前标准 SD 卡“大卡”主要用于相机。

microSD 也即我们所说的 TF 卡（类似于 EFI 和 UEFI 的关系）、手机存储卡。


这块闪迪的 microSD 卡，上面标有：

- `SanDisk Ultra`：`SanDisk` 是商标品牌名“闪迪”的英语；`Ultra` 是闪迪自己的型号款式——至尊高速款。
- `128 GB`：存储卡的容量是 128 GB。
- `C10`（`10` 环绕着圆形“C”符号）：该参数无效，不用看。现在所有卡标的都是 10，想找低于 10 的都难。
- `Mirco SD XC`（micro SDXC）：指该卡容量位于 32G-2TB 间；2G-32G 为“micro SDHC”。其他的，现在基本上见不到——容量小于 2G（microSD）或容量大于 2TB（microSDUC）。这个参数也没什么意义，因为必定是个卡上就标了容量大小。
- `U1`（`1` 环绕着圆形“U”符号）: `U1` 最低写入速度为 10MB/秒；U3 则为 30MB/秒。**没有 U2**。**只有老产品（U3）或低速设备（U1）会标**
- `1`（XC 右侧，U1 下方）：使用 UHS-I：总线最高为 104MB/秒；UHS-II 则为 312MB/秒。该总线决定了存储卡的速度上限。
- `A1`：随机读写速率。目前只有 A1、A2 两等，如果没标就是连 A1 都没到。树莓派须使用 A2 卡。


### 补充

- `667x`、`1066x`：雷克沙等卡会标 667x、或 1066x，这种标识方法目前只有 CD 机、磁带机、光盘还在用，相当古老（二十世纪 80 年代）。

①667x = 150KB/s x 667 ≈ 83MB/S；

②1066x = 150KB/s x 1066 ≈ 156MB/S。

- `V30`：新产品一般将 `U3` 标为 **V30**。不用找 V60，有但是非常贵（正常的 A2 卡 1 元 1G；V60 3 元 1G，但是似乎 V60 A2 没有共存的）V90 的 microSD 卡我没有见过。低于 V30 的也没见过，一般就标成 `U1`。速率标准换算：***C10 = U1 = V10*** 这 3 个东西其实是一回事，但同时标着。


总结：这块闪迪 microSD 存储卡上面标了 7 个参数，其中 4 个都是没用的。并且从参数上看，这款存储卡并不具什么优势，很平凡。

### 存储卡挑选总结

总结：对于树莓派：容量（推荐至少为 32G）、连续读写（至少 V30）、随机读写（A2）。但是现在是个卡就是这么标的，且除了树莓派 5，其他的设备（比如 Switch）本身大都达不到其 SD 卡设计的总线速率，**所以仅须看是 A1、还是 A2 这一个参数就可以了。**

### 参数标称就符合？

>>**扩容卡看起来已不再是常态**
>
>在过去，廉价的大容量存储卡往往是扩容的，但是这种卡连树莓派启动盘制作工具都通不过，因为该工具内置了镜像校验程序。如果标称容量和实际对不上，就无法完成镜像写入。所以，对于树莓派不必考虑这种问题。另外现在的存储颗粒已经非常廉价了，一般不至于再这么做。如果不是容量非常离谱（> 128G)，一般都不存在这种问题。

>>**部分标称参数与实际测试不符且会掉盘**
>
>**移速（MOVE SPEED）**
>
>![移速 128G A2 U3 V30 128G 存储卡速度测试](../.gitbook/assets/ys1.png)
>
>![移速 128G A2 U3 V30 128G 存储卡速度测试](../.gitbook/assets/ys2.png)
>
>**移速（MOVE SPEED）** 这张卡速度甚至比三星还快。~~这是用空间换时间了吗？~~ 某些 A2 存储卡，实际测试 4k 读写只有不到 1.5MB/s，快赶上那个金士顿 DT100G3 了。这已经不是虚标的问题了。
>
>但是经过实测，移速 128G A2 U3 V30 128G 存储卡，仅仅写入约 60 GB 就会掉盘。变成这样：
>
>![移速 128G A2 U3 V30 128G 存储卡掉盘](../.gitbook/assets/yisusd.png)
>
>![移速 128G A2 U3 V30 128G 存储卡掉盘](../.gitbook/assets/yisusd2.png)


### 如何测试存储卡和硬盘？

我们可以用 `CrystalDiskInfo` 查看硬盘的 S.M.A.R.T. 信息及基本参数。还可以用 `CrystalDiskMark` 测试硬盘和存储卡的读写（请使用 USB 3.0 的读卡器！）

上述两款软件是同开发者开发的，但是其[官方网站](https://crystalmark.info/en/)不知道为什么，插了很多虚假广告，诱导下载错误的文件。

请从 **[这里](https://sourceforge.net/projects/crystaldiskinfo)** 下载 CrystalDiskInfo；请从 **[这里](https://sourceforge.net/projects/crystaldiskmark/files/)** 下载 CrystalDiskMark；

而 **不要** 去访问他的网站，因为上面才是最终存放文件的地方，你访问网站最终也会被转跳到这里。

在撰写本文时，笔者下载使用的是 `CrystalDiskInfo9_3_2Shizuku.exe` 和 `CrystalDiskMark8_0_5Shizuku.exe`。因为好看，如果不需要花哨的颜色，你可以分别选择“CrystalDiskInfo9_3_2.exe”、“CrystalDiskMark8_0_5.exe”代替之。


### 使用 CrystalDiskInfo 查看梵想 S690（1TB）NVMe SSD PCIe4.0 硬盘参数

![梵想 S690（1TB）NVMe SSD PCIe4.0](../.gitbook/assets/pciessd3.png)


### 使用 CrystalDiskMark 测试梵想 S690（1TB）NVMe SSD PCIe4.0 读写速率

![梵想 S690（1TB）NVMe SSD PCIe4.0 读写速率](../.gitbook/assets/pcie4ssd2.png)

![梵想 S690（1TB）NVMe SSD PCIe4.0 读写速率](../.gitbook/assets/pcie4ssd1.png)


### 使用 CrystalDiskMark 测试雷克沙 1066x A2 U3 128GB 存储卡读写速率（使用 USB 3.0 读卡器）


![雷克沙 1066x A2 U3 128GB 存储卡读写速率](../.gitbook/assets/lkssd2.png)

![雷克沙 1066x A2 U3 128GB 存储卡读写速率](../.gitbook/assets/lkssd1.png)

可以明显地看到，雷克沙 1066x A2 U3 128GB 存储卡实际测试与页面标称严重不符：标称 A2，应达到读 4000 IOPS，写 2000 IOPS。实际上，无论随机读还是随机写都只有一半；连续读写更是无稽之谈。这是为什么？

#### 任何速度超过 104MB/秒的 microSD 存储卡无意义

这是为什么？一方面因为使用的不是超频读卡器（即雷克沙配套的读卡器，用于支持其自定义协议），因为 UHS-I 协议速度上限是 104MB/秒（SDR 104），任何存储卡在理论上无法超越，除非使用 UHS-II（两排金手指），但是对于 microSD 来说，几乎没有使用 UHS-II 的，只有标准大小的 SD 卡才有（相机使用）。故，市场上无论三星还是闪迪，只要速度超越了 UHS-I 速度上限，又非 UHS-II，必定是使用了非标准的协议。**这种非标准协议只有他们的官方读卡器才能支持（售价极高且一般捆绑销售）。其他设备都是不支持这种速率的，故没有意义。**

### 使用 CrystalDiskMark 测试三星 BAR 升级版 + USB3.1 闪存盘 64G 读写速率

即金属款。

![三星 BAR 升级版 + USB3.1 闪存盘 64G 读写速率](../.gitbook/assets/san1.png)

![三星 BAR 升级版 + USB3.1 闪存盘 64G 读写速率](../.gitbook/assets/san2.png)

### 参考文献

- [Raspberry Pi 树莓派中文文档](https://rpicn.bsdcn.org)
- [Inside the Raspberry Pi: The story of the $35 computer that changed the world](https://www.techrepublic.com/article/inside-the-raspberry-pi-the-story-of-the-35-computer-that-changed-the-world/)
- [SD 卡和 microSD 卡类型指南](https://www.kingston.com/cn/blog/personal-storage/microsd-sd-memory-card-guide)
- [SD 卡 和 microSD 卡速度等级指南](https://www.kingston.com/cn/blog/personal-storage/memory-card-speed-classes)
- [了解 SD 卡和 microSD 卡的命名惯例和标签](https://www.kingston.com/cn/blog/personal-storage/microsd-sd-memory-card-naming-conventions)
- [電腦概論中的考古題，關於光碟機的倍數是指什麼](https://www.mobile01.com/topicdetail.php?f=300&t=2126605&p=3)
- [移速（MOVE SPEED）64GB TF（MicroSD）存储卡测试](https://www.bilibili.com/read/mobile?id=21681916)
- [移速这个卡虚标了，速度只有标注的二分之一](https://post.m.smzdm.com/talk/p/az6o8zkr/)
- [Mvespeed 移速 400G 内存卡简单测评](https://post.m.smzdm.com/p/arq759g7/)
- [移速 TF 卡翻不翻车？看来没翻（附游戏测试）](https://post.m.smzdm.com/p/awzqn9z4/)
- [闪迪至尊超极速移动™ microSDXC™ UHS-I 存储卡 - 128GB](https://www.westerndigital.com/zh-cn/products/memory-cards/sandisk-extreme-pro-uhs-i-microsd?sku=SDSQXCY-128G-ZN6MA)（参见注释 8：“采用专利技术”）
- [存储卡也超频？实测结果非常意外](https://mp.weixin.qq.com/s/CMioVrUx0YJbF_v7zvQMRA)
- [BAR 升级版 + USB3.1 闪存盘](https://www.samsung.com.cn/memory-storage/usb-flash-drive/usb-3-1-flash-drive-bar-plus-64gb-titanium-gray-muf-64be4-cn/)


## 总线、接口与协议

我们知道 M.2 只是一个物理接口，它本质上是一种迷你的 PCIe 接口，可以直接连接物理引脚而无需额外的芯片。

根据 M.2 规范和 PCIe 规范，M.2 接口最大支持 3.3V 3A，约为 10W。

---

我们首先需要区分三个概念：物理接口、总线协议/总线通道和通道/协议。实际上，这些概念可以简化为两个，因为在本质上，通道/协议等同于总线协议/总线通道和物理总线（例如 PCIe、RJ45、Type-C 之类的物理接口、连接器、连接线等）相加——通道/协议是一个泛指，既可以指二者之和，也可以指二者之一，还可以同时指二者。

- 通道 = 协议；
- 物理总线 = 物理接口；
- 物理接口：代指实际的物理连接和传输介质，例如 M.2、Type-C 口、SATA、以太网线、USB 数据线等；
- 总线协议/总线通道：指的是用于数据传输的规则和标准，例如 PCIe 协议、USB 协议、SATA 协议、TCP/IP 协议；
- 总线/通道：总线/通道 = 物理总线/物理介质 + 总线协议/总线通道。


>**注意**
>
>**总线是指整个数据传输路径，是物理总线（即物理连接和传输介质）和总线协议（即数据传输的规则和标准）的组合。**


>例如，可以使用以太网线来传输 HDMI 数字信号。这展示了物理总线的可复用性。
>
>参考[绿联（UGREEN）HDMI 延长器 50 米 HDMI 转 RJ45 网传网口转换器 单网线网络高清 1080P 视频传输信号放大器 一对装 90811](https://item.jd.com/100053619301.html)。它使用以太网线来延长 HDMI 信号，其传输的物理介质是以太网线，接头是 RJ45。
>
>从设计上讲，以太网线通常使用以太网协议传输数据，物理介质是以太网线，接头是 RJ45。然而，该产品的存在表明，物理总线可以承载不同的信号类型。以太网线作为物理介质，既可以用于传输以太网协议下的 TCP/IP 数据，也可以通过不同的信号编码和转换器传输 HDMI 的数据。
>
>并且该产品在实际传输 HDMI 数据时，并不是使用以太网协议，而是通过 HDMI 协议下的信号编码（TMDS）传输。
>
>参考文献：
>
>- [将 HDMI 信号通过单条网线传输的方法](https://patents.google.com/patent/CN101572074A/zh)


物理接口在理论上决定了其承载的上限和电气性能，如能够承受的电压、电流和功率，IP 等级，以及尺寸规格如多少 X 多少。常见的物理接口包括 M.2、U.2、SATA、USB（包括 Type-C）、HDMI、DP 和 RJ45。

在大多数情况下，我们通常讨论的是物理接口，但严格来说，将物理接口和其承载的协议混为一谈是不准确的。因为任何物理接口在理论上都可以通过适配器相互转换。

>例如，Type-C 接口可以支持 USB2.0、USB3.0、DP、HDMI、Thunderbolt 和 USB PD 等多种协议。因此，M.2 接口在理论上既可以连接 NVMe 硬盘，也可以连接 SATA 硬盘，还可以连接显卡、声卡以及主板上的 PCIe 设备，而无需任何驱动，但可能需要额外的 12V 电源供应。

总线协议（我们将直接连接到 CPU 的通道称为总线，总线本质上也是通道）。现代 x86 计算机通常只有三种总线：**USB**、**SATA**、**PCIe**。

>例如，现代消费者型号的英特尔处理器通常仅直接支持这三种总线。

SATA 协议或 SATA 硬盘之所以慢，是由于协议设计问题造成的，与 SATA 这个物理接口本身关系不大。并且 SATA 协会已经摆烂了，他们认为与其设计更多不兼容传统 SATA 设备的新协议，去改造 SATA 这个总线协议，还不如让用户去用使用 PCIe 硬盘或者直接把 SATA 硬盘接到 PCIe。SATA 目前也兼容了 PCIe 总线。

因为直接连接到 CPU 的通道我们称之为总线协议，因此其他通道则被称为普通协议或通道。对于现代处理器而言，只有 USB、SATA 和 PCIe 这三种总线直接连接到 CPU。而大多数其他设备，如网卡、显卡、声卡、摄像头通常连接到 PCIe 接口。

>需要注意的是，尽管这些设备连接到了 PCIe 总线，但并非所有设备都是直接连接到了 CPU（通常是通过主板上的 DMI 通道转接的）。

我们需要先来介绍一下 2010 以前的大部分 X86 计算机（即三代酷睿以前）的架构：

- CPU——> 前端总线 FSB—> 北桥—> PCI—> 南桥—> PCI—> 其他设备。

>以上 PCI 也可以替换为 PCIe。

但是在 PCIe 和新一代酷睿大规模使用后北桥在主板上就消失了。曾经的北桥负责高速设备（比如内存、集显），南桥负责低速设备（网卡、声卡、摄像头等）。南北桥之前通过 PCI 总线连接。

>在某种意义上，以前的 PS/2 鼠标、PS/2 键盘相当于直连 CPU（北桥）。
>
>但是现在仍然有直连 CPU 的 USB 总线，一样可以接入键盘和鼠标。所以，用是否直连 CPU 来论证 PS/2 接口的优越性是毫无道理可言的。

在现代 x86 CPU 中，已经在主板上看不见北桥了，但是北桥并未真正消失，他只是被集成到了 CPU 而已，并且由若干 CPU 核心负责处理这些，PCIe 总线也从这些核心上面引出。

我们所说的直连到 CPU 的 PCIe，本质上就是之前直连北桥的 PCI。现代 CPU 通过引脚连接到主板，CPU 和主板之间的 PCIe 被英特尔称为 DMI（Direct Media Interface，直接媒体接口），而 AMD 则称之为 PCIe。DMI 3.0x4 相当于 PCIe 3.0x4。

在主板上的设备要么直连到 CPU，要么通过主板上的 DMI 总线转接到 CPU。

由于北桥已经集成到了 CPU 中，看上去就有了两种方式连接 CPU：

- ① CPU -> PCIe（处理器上的 PCIe） -> 设备（任何设备），我们称之为直连 CPU 的 PCIe；

- ② CPU -> PCIe（DMI，芯片组/PCH 上的 PCIe） -> 主板 -> PCIe（或转换成其他接口，如 SATA、USB、M.2） -> 设备。

因此，理论上要获得最大速度，需要使用 ①，但可能会影响 CPU 和设备的稳定性。

同时需要注意，PCIe 并不是无限多的，这由 CPU 的规格决定，一般情况下，英特尔 CPU 可能只有 20 条 PCIe，例如 PCIe 3.0x20，其中的 3.0 表示 PCIe 的版本号，20 表示通道数。

>因此，DMI 的上限也不是无穷大的，如果在主板上安装了很多 PCIe x16 插槽，由于 DMI 通道的限制，这只是看上去很好，但实际上不能达到预期效果（如果插满，肯定不会符合预期）。

>**除了直连到 CPU 的设备外，所有其他设备都共享主板上的 DMI 总线。**

>其实从根本上说无论是否将北桥进行集成没有任何区别。在本质上都是相同的。这是由冯·诺依曼架构所决定的。但在性能和效率有所提升。

一般来说，任何设备要进行转换，不仅需要在物理上连接（将线连接在一起），还需要在软件层面（即驱动程序）进行适配。例如，所谓 NVMe 转 USB 的正确说法应该是 USB 3.1 Gen 2 到 PCIe Gen3 x2 桥接控制器。这种转换并不是将 NVMe 转换为 USB，而是将 PCIe 转换为 USB。

>并不是因为不需要安装驱动就意味着设备内部没有芯片，因为大多数这类驱动程序都是内置在操作系统中的。

事实上，总线、接口与协议这三者在严格意义上应该是分开的。因此，当我们谈论 M.2 转换为 PCIe 时，只是物理上将它们连接起来，不需要额外的芯片（因此也不需要驱动程序）。但是，如果要将 M.2 支持 SATA，就需要进行协议转换。

>例如，虽然 M.2 物理接口相同，但如果要连接 SATA 硬盘，就必须通过转换芯片进行连接。

>同样，严格来说并不是 SATA 转换为 M.2，而是 SATA 转换为 PCIe，即使用的是 PCIe Gen3 x1 转 2xSATA 桥接控制器。

因此，当我们提及 M.2 NVMe SSD 时，应该明确它是一种 PCIe 硬盘，NVMe 则是基于 PCIe 的应用层协议。就像英特尔连接主板与 CPU 的通道的 DMI 在本质上也是 PCIe 一样。

首先，任何 M.2 在物理上都完全等于 PCIe。无需任何芯片或电平转换。M.2 接口 = mini PCIe，并且在历史上也的确如此。但是 M.2 没有 12V（U.2 接口支持，可以视为增强型的 M.2）。

标准的 PCIe 接口同时供电 3.3V、12V，最大支持 75W。而标准的 M.2 最高支持 3.3V 3A，即 10W。

总线就是协议的一种，无非总线是公用通道，大家都直接或间接兼容而已。真正存在的东西只有两种，物理的接口和软件的协议。与协议分层实际上无关。只要是硬件就可以随便转（硬件本质也是电压电流，电信号随便转）。